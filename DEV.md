## Developer instructions for Waffle Takeout

### Setting up your dev environment
##### Install boot2docker:
``` bash
brew update
brew install caskroom/cask/brew-cask
brew cask install virtualbox
brew install boot2docker
boot2docker init
boot2docker up
```

Add `DOCKER_HOST` to your `~/.zshrc`:
`export DOCKER_HOST=tcp://192.168.59.103:2376`

##### Installing takeout
1. Download the takeout delivery from S3, or use the zip generated by the `./build.sh` script.
2. Remove all local Waffle environment variables (comment out in your `zshrc`).
3. Run `./install.sh`

### Updating docker images
_Pushes to master trigger docker builds in quay.io, these steps are not required during normal development._

1. Build the docker image: `docker build --tag="waffleio/waffle.io-app" --no-cache .` (the `no-cache` option is required for now, otherwise new code changes won't be picked up).
2. Grab the image id from the output.
3. Tag the image for quay.io: `docker tag -f <image id> quay.io/waffleio/waffle.io-app`
4. Upload to quay.io: `docker push quay.io/waffleio/waffle.io-app`

Of course, replace `waffleio/waffle.io-app` with the repo in question.
